---
alwaysApply: true
---

# 動作検証とテスト手順

## 基本的な動作検証手順

### 1. Make コマンドを使用した動作検証

このプロジェクトでは、動作検証には必ず Make コマンドを使用してください：

```bash
# Wire生成（新規APIを作成し、routerなどに変更がある場合のみ）
make wire-gen

# データベース起動
make run-db

# アプリケーション起動
make run
```

### 2. Air ホットリロードの活用

- **Air によるホットリロード**が設定されているため、基本的に`docker build`や手動`reload`は不要
- `make wire-gen`実行後、Air が自動的にリビルドを検出して再起動する
- 手動での Docker コンテナ再起動やリビルドは避ける

### 3. 動作確認のタイミング

- コード変更後、**数秒待ってから**動作検証を行う
- Air のホットリロードが完了するまで少し時間がかかる
- 急いでテストせず、ログでリロード完了を確認してから検証する

### 4. ヘルスチェックによる動作確認

```bash
# 基本的なヘルスチェック
curl -s http://localhost:1323/

# 期待される応答
# healthcheck: ok

# アプリケーション起動中の場合
curl -s http://localhost:1323/ || echo "アプリケーション起動中..."
```

### 5. 検証の流れ

1. `make wire-gen` (新規 API を作成し、router などに変更がある場合のみ)
2. 数秒待つ (Air のホットリロード完了を待つ)
3. `curl -s http://localhost:1323/` で動作確認
4. 必要に応じて他のエンドポイントをテスト

## 注意事項

- Docker build やコンテナの手動再起動は基本的に不要
- Air のホットリロードを信頼し、自動リビルドを活用する
- 動作確認は常に curl コマンドで行う
- Wire 生成後は必ず Air の自動リビルドを待つ
